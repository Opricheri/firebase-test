<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase + GitHub Pages Sample</title>
</head>

<body>
    <h1>Firebase + Firestore デモ</h1>
    <button id="addDataBtn">データを追加</button>

    <script type="module">
        // Firebase SDKの読み込み
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        // Firebase設定（自分のプロジェクトに置き換えてください）
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDxlhJDDJVrtO_5L5aBXesDYOfBOCMtsCc",
            authDomain: "test-3566a.firebaseapp.com",
            projectId: "test-3566a",
            storageBucket: "test-3566a.firebasestorage.app",
            messagingSenderId: "533205004878",
            appId: "1:533205004878:web:7f5a3d9ba1cbce9f59091f",
            measurementId: "G-4EFC4TL00F"
        };

        // Firebase初期化
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); // ← ここでFirestoreを有効化

        // ボタン押下時にFirestoreへデータを追加する関数
        async function addData() {
            console.log("ボタンが押されました"); // 確認用
            try {
                const docRef = await addDoc(collection(db, "testCollection"), {
                    name: "GitHub Pages User",
                    createdAt: new Date()
                });
                alert("データを追加しました: " + docRef.id);
            } catch (e) {
                console.error("Firestore書き込みエラー:", e);
                alert("データ追加に失敗しました。コンソールを確認してください。");
            }
        }

        // ボタンにイベントを設定
        document.getElementById("addDataBtn").addEventListener("click", addData);
    </script>
</body>

</html>